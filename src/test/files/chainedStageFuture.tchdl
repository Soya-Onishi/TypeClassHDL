package test

module Top
impl Top {
  input def function(a: Bit[8], b: Bit[8], c: Bit[8], d: Bit[8]) -> Future[Bit[8]] {
    generate s1(a, b, c, d)
  }

  stage s1(a: Bit[8], b: Bit[8], c: Bit[8], d: Bit[8]) -> Future[Bit[8]] {
    val x = a + b
    val y = c + d

    return relay s2(x, y)
  }

  stage s2(x: Bit[8], y: Bit[8]) -> Future[Bit[8]] {
    return Future[Bit[8]]:::Ready(x + y)
    finish
  }
}